<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maritime Operations Dashboard Wizard</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .step-indicator {
            transition: all 0.3s ease;
        }
        .step-active {
            background: linear-gradient(135deg, #3B82F6, #1E40AF);
            transform: scale(1.1);
        }
        .step-completed {
            background: linear-gradient(135deg, #10B981, #059669);
        }
        .dashboard-card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .kpi-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .kpi-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .progress-bar-animated {
            background: linear-gradient(90deg, #10B981, #34D399, #6EE7B7);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        .wizard-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .dashboard-container {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <!-- Wizard Interface -->
    <div id="wizardInterface" class="wizard-container">
        <div class="container mx-auto px-4 py-8">
            <!-- Header -->
            <div class="text-center mb-12">
                <h1 class="text-4xl font-bold text-white mb-4">
                    <i class="fas fa-ship mr-3"></i>Maritime Operations Dashboard Wizard
                </h1>
                <p class="text-xl text-blue-100">Create custom live dashboards for your vessel operations</p>
            </div>

            <!-- Step Indicator -->
            <div class="flex justify-center mb-12">
                <div class="flex items-center space-x-4">
                    <div id="step1-indicator" class="step-indicator step-active w-12 h-12 rounded-full flex items-center justify-center text-white font-bold">1</div>
                    <div class="w-16 h-1 bg-blue-300"></div>
                    <div id="step2-indicator" class="step-indicator w-12 h-12 rounded-full bg-blue-300 flex items-center justify-center text-white font-bold">2</div>
                    <div class="w-16 h-1 bg-blue-300"></div>
                    <div id="step3-indicator" class="step-indicator w-12 h-12 rounded-full bg-blue-300 flex items-center justify-center text-white font-bold">3</div>
                    <div class="w-16 h-1 bg-blue-300"></div>
                    <div id="step4-indicator" class="step-indicator w-12 h-12 rounded-full bg-blue-300 flex items-center justify-center text-white font-bold">4</div>
                </div>
            </div>

            <!-- Step 1: Vessel Information -->
            <div id="step1" class="dashboard-card rounded-2xl p-8 shadow-2xl mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-ship text-blue-600 mr-3"></i>Vessel Information
                </h2>
                
                <!-- File Upload Section -->
                <div class="mb-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border-2 border-dashed border-blue-300">
                    <div class="text-center">
                        <i class="fas fa-cloud-upload-alt text-4xl text-blue-500 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Quick Fill from Document</h3>
                        <p class="text-gray-600 mb-4">Upload a maritime document (PDF, CSV, or TXT) to automatically populate the form</p>
                        
                        <div class="flex items-center justify-center w-full">
                            <label for="documentUpload" class="flex flex-col items-center justify-center w-full h-32 border-2 border-blue-300 border-dashed rounded-lg cursor-pointer bg-blue-50 hover:bg-blue-100 transition-colors duration-200">
                                <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                    <i class="fas fa-file-upload text-2xl text-blue-500 mb-2"></i>
                                    <p class="mb-2 text-sm text-gray-500"><span class="font-semibold">Click to upload</span> or drag and drop</p>
                                    <p class="text-xs text-gray-500">PDF, CSV, or TXT files (Max 16MB)</p>
                                </div>
                                <input id="documentUpload" type="file" class="hidden" accept=".pdf,.csv,.txt" onchange="handleFileUpload(event)">
                            </label>
                        </div>
                        
                        <div id="uploadStatus" class="mt-4 hidden">
                            <div class="flex items-center justify-center">
                                <div id="uploadSpinner" class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mr-3"></div>
                                <span id="uploadText" class="text-blue-600">Processing document...</span>
                            </div>
                        </div>
                        
                        <div id="uploadSuccess" class="mt-4 hidden">
                            <div class="flex items-center justify-center text-green-600">
                                <i class="fas fa-check-circle mr-2"></i>
                                <span>Document processed successfully! Form has been auto-filled.</span>
                            </div>
                        </div>
                        
                        <div id="uploadError" class="mt-4 hidden">
                            <div class="flex items-center justify-center text-red-600">
                                <i class="fas fa-exclamation-circle mr-2"></i>
                                <span id="errorText">Error processing document. Please try again.</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Stevedore Team Assignment Section -->
                <div class="mb-8 p-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border-2 border-green-200">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-users text-2xl text-green-600 mr-3"></i>
                        <h3 class="text-xl font-semibold text-gray-800">Stevedore Team Assignment</h3>
                    </div>
                    <p class="text-gray-600 mb-4">Assign team members to different operation roles for this vessel</p>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Auto Operations Team -->
                        <div class="bg-white p-4 rounded-lg border border-green-200">
                            <h4 class="font-semibold text-gray-800 mb-3 flex items-center">
                                <i class="fas fa-car text-blue-500 mr-2"></i>Auto Operations Team
                            </h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Lead Supervisor</label>
                                    <input type="text" id="autoOpsLead" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="e.g., Colby Chapman">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Assistant Supervisor</label>
                                    <input type="text" id="autoOpsAssistant" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="e.g., Cole Bailey">
                                </div>
                            </div>
                        </div>
                        
                        <!-- High & Heavy Team -->
                        <div class="bg-white p-4 rounded-lg border border-green-200">
                            <h4 class="font-semibold text-gray-800 mb-3 flex items-center">
                                <i class="fas fa-truck text-orange-500 mr-2"></i>High & Heavy Team
                            </h4>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Lead Supervisor</label>
                                    <input type="text" id="heavyOpsLead" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="e.g., Spencer Wilkins">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Assistant Supervisor</label>
                                    <input type="text" id="heavyOpsAssistant" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="e.g., Bruce Banner">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Additional Team Roles -->
                    <div class="mt-4 grid md:grid-cols-2 gap-6">
                        <div class="bg-white p-4 rounded-lg border border-green-200">
                            <h4 class="font-semibold text-gray-800 mb-3 flex items-center">
                                <i class="fas fa-anchor text-purple-500 mr-2"></i>Berth Assignment
                            </h4>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Berth Location</label>
                                <select id="berthLocation" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    <option value="">Select Berth</option>
                                    <option value="Berth 1">Berth 1</option>
                                    <option value="Berth 2">Berth 2</option>
                                    <option value="Berth 3">Berth 3</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg border border-green-200">
                            <h4 class="font-semibold text-gray-800 mb-3 flex items-center">
                                <i class="fas fa-user-tie text-indigo-500 mr-2"></i>Operation Manager
                            </h4>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Your Name</label>
                                <input type="text" id="operationManager" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-transparent" placeholder="Enter your name">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Vessel Name</label>
                        <input type="text" id="vesselName" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., Donington 38">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Vessel Type</label>
                        <select id="vesselType" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Type</option>
                            <option value="Auto Carrier">Auto Carrier</option>
                            <option value="RoRo Vessel">RoRo Vessel</option>
                            <option value="Multi-Purpose">Multi-Purpose</option>
                            <option value="Container Ship">Container Ship</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Port</label>
                        <input type="text" id="port" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" value="Colonel Island" list="portOptions">
                        <datalist id="portOptions">
                            <option value="Colonel Island">
                            <option value="Brunswick, GA">
                            <option value="Baltimore, MD">
                            <option value="Jacksonville, FL">
                        </datalist>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Operation Date</label>
                        <input type="date" id="operationDate" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Stevedoring Company</label>
                        <input type="text" id="company" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" value="APS Stevedoring" list="companyOptions">
                        <datalist id="companyOptions">
                            <option value="APS Stevedoring">
                            <option value="SSA Marine">
                            <option value="Ports America">
                        </datalist>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Operation Type</label>
                        <select id="operationType" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Operation</option>
                            <option value="Discharge Only">Discharge Only</option>
                            <option value="Loading Only">Loading Only</option>
                            <option value="Discharge + Loading">Discharge + Loading</option>
                        </select>
                    </div>
                </div>
                <div class="flex justify-end mt-8">
                    <button onclick="nextStep(1)" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-200">
                        Next <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- Step 2: Cargo Configuration -->
            <div id="step2" class="dashboard-card rounded-2xl p-8 shadow-2xl mb-8 hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-car text-green-600 mr-3"></i>Cargo Configuration
                </h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Total Automobiles</label>
                        <input type="number" id="totalAutomobiles" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 1004">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Heavy Equipment Units</label>
                        <input type="number" id="heavyEquipment" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 107">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">BRV Loading Target</label>
                        <input type="number" id="brvTarget" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 904">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Electric Vehicles</label>
                        <input type="number" id="electricVehicles" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 103">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Static Cargo Units</label>
                        <input type="number" id="staticCargo" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 24">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Cargo Brand/Type</label>
                        <input type="text" id="cargoType" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., Mercedes-Benz">
                    </div>
                </div>
                
                <!-- Zone Tracking Section -->
                <div class="mt-8 p-6 bg-yellow-50 rounded-lg border border-yellow-200">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-map-marked-alt text-yellow-600 mr-2"></i>Discharge Zone Configuration
                    </h3>
                    <p class="text-sm text-gray-600 mb-4">Configure discharge zones for vehicle tracking and analytics</p>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Zone A - Vehicles</label>
                            <input type="number" id="zoneAVehicles" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="e.g., 350">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Zone A - Description</label>
                            <input type="text" id="zoneADescription" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="e.g., North Terminal">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Zone B - Vehicles</label>
                            <input type="number" id="zoneBVehicles" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="e.g., 400">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Zone B - Description</label>
                            <input type="text" id="zoneBDescription" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="e.g., South Terminal">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Zone C - Vehicles</label>
                            <input type="number" id="zoneCVehicles" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="e.g., 254">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Zone C - Description</label>
                            <input type="text" id="zoneCDescription" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-500 focus:border-transparent" placeholder="e.g., Processing Area">
                        </div>
                    </div>
                </div>
                <div class="flex justify-between mt-8">
                    <button onclick="prevStep(2)" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-semibold transition duration-200">
                        <i class="fas fa-arrow-left mr-2"></i>Previous
                    </button>
                    <button onclick="nextStep(2)" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-200">
                        Next <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- Step 3: Operational Parameters -->
            <div id="step3" class="dashboard-card rounded-2xl p-8 shadow-2xl mb-8 hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-cogs text-purple-600 mr-3"></i>Operational Parameters
                </h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Expected Rate (cars/hour)</label>
                        <input type="number" step="0.1" id="expectedRate" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 120.5">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Total Drivers</label>
                        <input type="number" id="totalDrivers" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 77">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Shift Start Time</label>
                        <input type="time" id="shiftStart" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Shift End Time</label>
                        <input type="time" id="shiftEnd" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Break Duration (minutes)</label>
                        <input type="number" id="breakDuration" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 60">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Target Completion</label>
                        <input type="datetime-local" id="targetCompletion" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
                
                <!-- TICO Transportation Section -->
                <div class="mt-8 p-6 bg-blue-50 rounded-lg border border-blue-200">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-shuttle-van text-blue-600 mr-2"></i>TICO Transportation
                    </h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Number of Vans (7 drivers each)</label>
                            <select id="numVans" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="generateVehicleIdFields()">
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Number of Station Wagons (5 drivers each)</label>
                            <select id="numStationWagons" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="generateVehicleIdFields()">
                                <option value="0">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Dynamic Vehicle ID Fields -->
                    <div id="vehicleIdFields" class="mt-6">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
                <div class="flex justify-between mt-8">
                    <button onclick="prevStep(3)" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-semibold transition duration-200">
                        <i class="fas fa-arrow-left mr-2"></i>Previous
                    </button>
                    <button onclick="nextStep(3)" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-200">
                        Next <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- Step 4: Review & Generate -->
            <div id="step4" class="dashboard-card rounded-2xl p-8 shadow-2xl mb-8 hidden">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-check-circle text-green-600 mr-3"></i>Review & Generate Dashboard
                </h2>
                <div id="reviewSummary" class="bg-gray-50 rounded-lg p-6 mb-6">
                    <!-- Summary will be populated by JavaScript -->
                </div>
                <div class="flex justify-between mt-8">
                    <button onclick="prevStep(4)" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-semibold transition duration-200">
                        <i class="fas fa-arrow-left mr-2"></i>Previous
                    </button>
                    <button onclick="generateDashboard()" class="bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-200">
                        <i class="fas fa-rocket mr-2"></i>Generate Dashboard
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Generated Dashboard -->
    <div id="dashboardInterface" class="dashboard-container hidden">
        <div class="container mx-auto px-4 py-8">
            <!-- Dashboard Header -->
            <div id="dashboardHeader" class="text-center mb-8 p-6 dashboard-card rounded-2xl shadow-2xl">
                <!-- Will be populated by JavaScript -->
            </div>

            <!-- Dashboard Controls -->
            <div class="dashboard-card rounded-2xl p-6 shadow-2xl mb-8">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-800 flex items-center">
                        <i class="fas fa-sliders-h text-blue-600 mr-2"></i>Real-time Updates
                    </h3>
                    <button onclick="showWizard()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-semibold transition duration-200">
                        <i class="fas fa-plus mr-2"></i>New Operation
                    </button>
                </div>
                <div class="grid md:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Discharged</label>
                        <input type="number" id="currentDischarged" class="w-full px-3 py-2 rounded border focus:ring-2 focus:ring-blue-500" onchange="updateDashboard()">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Current Rate</label>
                        <input type="number" step="0.1" id="currentRate" class="w-full px-3 py-2 rounded border focus:ring-2 focus:ring-blue-500" onchange="updateDashboard()">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">BRV Loaded</label>
                        <input type="number" id="currentBrvLoaded" class="w-full px-3 py-2 rounded border focus:ring-2 focus:ring-blue-500" onchange="updateDashboard()">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Active Drivers</label>
                        <input type="number" id="currentDrivers" class="w-full px-3 py-2 rounded border focus:ring-2 focus:ring-blue-500" onchange="updateDashboard()">
                    </div>
                </div>
            </div>

            <!-- KPI Cards -->
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="kpi-card dashboard-card rounded-xl p-6 shadow-lg">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">Discharge Progress</p>
                            <p id="dischargeProgress" class="text-3xl font-bold text-blue-600">0%</p>
                        </div>
                        <div class="bg-blue-100 p-3 rounded-full">
                            <i class="fas fa-car text-blue-600 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 bg-gray-200 rounded-full h-2">
                        <div id="dischargeProgressBar" class="progress-bar-animated h-2 rounded-full" style="width: 0%"></div>
                    </div>
                </div>

                <div class="kpi-card dashboard-card rounded-xl p-6 shadow-lg">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">Current Rate</p>
                            <p id="currentRateDisplay" class="text-3xl font-bold text-green-600">0</p>
                            <p class="text-xs text-gray-500">cars/hour</p>
                        </div>
                        <div class="bg-green-100 p-3 rounded-full">
                            <i class="fas fa-tachometer-alt text-green-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="kpi-card dashboard-card rounded-xl p-6 shadow-lg">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">BRV Progress</p>
                            <p id="brvProgress" class="text-3xl font-bold text-purple-600">0%</p>
                        </div>
                        <div class="bg-purple-100 p-3 rounded-full">
                            <i class="fas fa-ship text-purple-600 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 bg-gray-200 rounded-full h-2">
                        <div id="brvProgressBar" class="bg-purple-600 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                </div>

                <div class="kpi-card dashboard-card rounded-xl p-6 shadow-lg">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">ZEE Progress</p>
                            <p id="zeeProgress" class="text-3xl font-bold text-yellow-600">0%</p>
                        </div>
                        <div class="bg-yellow-100 p-3 rounded-full">
                            <i class="fas fa-car-alt text-yellow-600 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 bg-gray-200 rounded-full h-2">
                        <div id="zeeProgressBar" class="bg-yellow-600 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                </div>

                <div class="kpi-card dashboard-card rounded-xl p-6 shadow-lg">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">SOU Progress</p>
                            <p id="souProgress" class="text-3xl font-bold text-red-600">0%</p>
                        </div>
                        <div class="bg-red-100 p-3 rounded-full">
                            <i class="fas fa-truck-loading text-red-600 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 bg-gray-200 rounded-full h-2">
                        <div id="souProgressBar" class="bg-red-600 h-2 rounded-full" style="width: 0%"></div>
                    </div>
                </div>

                <div class="kpi-card dashboard-card rounded-xl p-6 shadow-lg">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">ETC</p>
                            <p id="etcDisplay" class="text-2xl font-bold text-orange-600">--:--</p>
                        </div>
                        <div class="bg-orange-100 p-3 rounded-full">
                            <i class="fas fa-clock text-orange-600 text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts -->
            <div class="grid md:grid-cols-2 gap-8 mb-8">
                <div class="dashboard-card rounded-2xl p-6 shadow-2xl">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-chart-line text-blue-600 mr-2"></i>Progress Chart
                    </h3>
                    <div style="height: 300px;">
                        <canvas id="progressChart"></canvas>
                    </div>
                </div>

                <div class="dashboard-card rounded-2xl p-6 shadow-2xl">
                    <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-chart-pie text-green-600 mr-2"></i>Operation Overview
                    </h3>
                    <div style="height: 300px;">
                        <canvas id="overviewChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Data Table -->
            <div class="dashboard-card rounded-2xl p-6 shadow-2xl">
                <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-table text-purple-600 mr-2"></i>Operation Details
                </h3>
                <div class="overflow-x-auto">
                    <table class="w-full table-auto">
                        <thead>
                            <tr class="bg-gray-50">
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Metric</th>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Target</th>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Current</th>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Remaining</th>
                                <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Status</th>
                            </tr>
                        </thead>
                        <tbody id="dataTableBody">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentStep = 1;
        let operationData = {};
        let progressChart, overviewChart;

        // Wizard navigation
        function nextStep(step) {
            if (validateStep(step)) {
                if (step === 1) {
                    operationData.operationType = document.getElementById("operationType").value;
                }
                document.getElementById(`step${step}`).classList.add("hidden");
                document.getElementById(`step${step + 1}`).classList.remove("hidden");
                
                // Update step indicator
                document.getElementById(`step${step}-indicator`).classList.remove("step-active");
                document.getElementById(`step${step}-indicator`).classList.add("step-completed");
                document.getElementById(`step${step + 1}-indicator`).classList.add("step-active");
                
                currentStep = step + 1;
                
                if (step === 1) {
                    populateCargoConfigurationEnhanced(operationData.operationType);
                } else if (step === 2) {
                    // Populate operational parameters from session storage
                    setTimeout(() => {
                        populateFromSessionStorage();
                    }, 100);
                } else if (step === 3) {
                    populateReview();
                }
            }
        }

        function prevStep(step) {
            document.getElementById(`step${step}`).classList.add("hidden");
            document.getElementById(`step${step - 1}`).classList.remove("hidden");
            
            // Update step indicator
            document.getElementById(`step${step}-indicator`).classList.remove("step-active");
            document.getElementById(`step${step - 1}-indicator`).classList.add("step-active");
            document.getElementById(`step${step - 1}-indicator`).classList.remove("step-completed");
            
            currentStep = step - 1;
        }

        function generateVehicleIdFields() {
            const numVans = parseInt(document.getElementById("numVans").value) || 0;
            const numStationWagons = parseInt(document.getElementById("numStationWagons").value) || 0;
            const container = document.getElementById("vehicleIdFields");
            
            let fieldsHtml = "";
            
            if (numVans > 0 || numStationWagons > 0) {
                fieldsHtml += `<h4 class="text-lg font-semibold text-gray-800 mb-4">Vehicle ID Numbers</h4>`;
                
                if (numVans > 0) {
                    fieldsHtml += `<div class="mb-6">
                        <h5 class="text-md font-medium text-gray-700 mb-3">Van IDs (${numVans} vans)</h5>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">`;
                    
                    for (let i = 1; i <= numVans; i++) {
                        fieldsHtml += `
                            <div>
                                <label class="block text-xs font-medium text-gray-600 mb-1">Van ${i} ID</label>
                                <input type="text" id="vanId${i}" class="w-full px-3 py-2 text-sm rounded border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., V${i.toString().padStart(3, '0')}">
                            </div>`;
                    }
                    fieldsHtml += `</div></div>`;
                }
                
                if (numStationWagons > 0) {
                    fieldsHtml += `<div class="mb-4">
                        <h5 class="text-md font-medium text-gray-700 mb-3">Station Wagon IDs (${numStationWagons} wagons)</h5>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">`;
                    
                    for (let i = 1; i <= numStationWagons; i++) {
                        fieldsHtml += `
                            <div>
                                <label class="block text-xs font-medium text-gray-600 mb-1">Wagon ${i} ID</label>
                                <input type="text" id="wagonId${i}" class="w-full px-3 py-2 text-sm rounded border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., W${i.toString().padStart(3, '0')}">
                            </div>`;
                    }
                    fieldsHtml += `</div></div>`;
                }
            }
            
            container.innerHTML = fieldsHtml;
        }

        function populateCargoConfiguration(operationType) {
            const cargoConfigDiv = document.getElementById("step2");
            let cargoHtml = `
                <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-car text-green-600 mr-3"></i>Cargo Configuration
                </h2>
                <div class="grid md:grid-cols-2 gap-6">
            `;

            if (operationType === "Discharge Only" || operationType === "Discharge + Loading") {
                cargoHtml += `
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Total Automobiles to Discharge</label>
                        <input type="number" id="totalAutomobilesDischarge" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 1004">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Heavy Equipment to Discharge</label>
                        <input type="number" id="heavyEquipmentDischarge" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 107">
                    </div>
                `;
            }

            if (operationType === "Loading Only" || operationType === "Discharge + Loading") {
                cargoHtml += `
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">BRV Loading Target</label>
                        <input type="number" id="brvTarget" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 904">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ZEE Loading Target</label>
                        <input type="number" id="zeeTarget" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 103">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">SOU Loading Target</label>
                        <input type="number" id="souTarget" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 24">
                    </div>
                `;
            }

            cargoHtml += `
                </div>
                <div class="flex justify-between mt-8">
                    <button onclick="prevStep(2)" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-semibold transition duration-200">
                        <i class="fas fa-arrow-left mr-2"></i>Previous
                    </button>
                    <button onclick="nextStep(2)" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition duration-200">
                        Next <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            `;
            cargoConfigDiv.innerHTML = cargoHtml;
        }

        function validateStep(step) {
            let isValid = true;
            const requiredFields = {
                1: ["vesselName", "port", "operationDate"],
                2: [], // Dynamically set based on operationType
                3: ["expectedRate", "totalDrivers"]
            };

            if (step === 2) {
                const operationType = document.getElementById("operationType").value;
                if (operationType.includes("Discharge")) {
                    requiredFields[2].push("totalAutomobilesDischarge");
                }
                if (operationType.includes("Loading")) {
                    requiredFields[2].push("brvTarget", "zeeTarget", "souTarget");
                }
            }

            if (requiredFields[step]) {
                requiredFields[step].forEach(field => {
                    const element = document.getElementById(field);
                    if (!element.value.trim()) {
                        element.classList.add("border-red-500");
                        isValid = false;
                    } else {
                        element.classList.remove("border-red-500");
                    }
                });
            }

            if (!isValid) {
                alert("Please fill in all required fields.");
            }

            return isValid;
        }

        function populateReview() {
            const data = collectFormData();
            const reviewHtml = `
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-2">Vessel Information</h4>
                        <p><strong>Vessel:</strong> ${data.vesselName}</p>
                        <p><strong>Type:</strong> ${data.vesselType}</p>
                        <p><strong>Port:</strong> ${data.port}</p>
                        <p><strong>Date:</strong> ${data.operationDate}</p>
                        <p><strong>Company:</strong> ${data.company}</p>
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-2">Cargo Configuration</h4>
                        <p><strong>Operation Type:</strong> ${data.operationType}</p>
                        ${data.operationType.includes("Discharge") ? `<p><strong>Total Automobiles to Discharge:</strong> ${data.totalAutomobilesDischarge}</p><p><strong>Heavy Equipment to Discharge:</strong> ${data.heavyEquipmentDischarge}</p>` : ``}
                        ${data.operationType.includes("Loading") ? `<p><strong>BRV Target:</strong> ${data.brvTarget || "N/A"}</p><p><strong>ZEE Target:</strong> ${data.zeeTarget || "N/A"}</p><p><strong>SOU Target:</strong> ${data.souTarget || "N/A"}</p>` : ``}
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-2">Operational Parameters</h4>
                        <p><strong>Expected Rate:</strong> ${data.expectedRate} cars/hour</p>
                        <p><strong>Total Drivers:</strong> ${data.totalDrivers}</p>
                        <p><strong>Shift:</strong> ${data.shiftStart} - ${data.shiftEnd}</p>
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-2">TICO Transportation</h4>
                        <p><strong>Vans:</strong> ${data.ticoVans || 0} (${(data.ticoVans || 0) * 7} driver capacity)</p>
                        <p><strong>Station Wagons:</strong> ${data.ticoStationWagons || 0} (${(data.ticoStationWagons || 0) * 5} driver capacity)</p>
                        <p><strong>Total Vehicle Capacity:</strong> ${((data.ticoVans || 0) * 7) + ((data.ticoStationWagons || 0) * 5)} drivers</p>
                        ${data.vanIds && data.vanIds.length > 0 ? `<p><strong>Van IDs:</strong> ${data.vanIds.join(", ")}</p>` : ""}
                        ${data.wagonIds && data.wagonIds.length > 0 ? `<p><strong>Wagon IDs:</strong> ${data.wagonIds.join(", ")}</p>` : ""}
                    </div>
                </div>
                <div class="mt-6 p-4 bg-green-50 rounded-lg border border-green-200">
                    <h4 class="font-semibold text-gray-800 mb-2">Estimated Performance</h4>
                    <p><strong>Estimated Duration:</strong> ${Math.ceil((data.totalAutomobilesDischarge || 0) / data.expectedRate)} hours</p>
                    <p><strong>Break Time:</strong> ${data.breakDuration || 0} minutes</p>
                    <p><strong>Driver Transportation:</strong> ${data.totalDrivers <= (((data.ticoVans || 0) * 7) + ((data.ticoStationWagons || 0) * 5)) ? " Sufficient vehicle capacity" : " Insufficient vehicle capacity"}</p>
                </div>
            `;
            document.getElementById("reviewSummary").innerHTML = reviewHtml;
        }

        function collectFormData() {
            const numVans = parseInt(document.getElementById("numVans").value) || 0;
            const numStationWagons = parseInt(document.getElementById("numStationWagons").value) || 0;
            
            // Collect van IDs
            const vanIds = [];
            for (let i = 1; i <= numVans; i++) {
                const vanId = document.getElementById(`vanId${i}`)?.value || "";
                if (vanId) vanIds.push(vanId);
            }
            
            // Collect station wagon IDs
            const wagonIds = [];
            for (let i = 1; i <= numStationWagons; i++) {
                const wagonId = document.getElementById(`wagonId${i}`)?.value || "";
                if (wagonId) wagonIds.push(wagonId);
            }
            
            return {
                vesselName: document.getElementById("vesselName").value,
                vesselType: document.getElementById("vesselType").value,
                port: document.getElementById("port").value,
                operationDate: document.getElementById("operationDate").value,
                company: document.getElementById("company").value,
                operationType: document.getElementById("operationType").value,
                berthLocation: document.getElementById("berthLocation").value,
                operationManager: document.getElementById("operationManager").value,
                autoOpsLead: document.getElementById("autoOpsLead").value,
                autoOpsAssistant: document.getElementById("autoOpsAssistant").value,
                heavyOpsLead: document.getElementById("heavyOpsLead").value,
                heavyOpsAssistant: document.getElementById("heavyOpsAssistant").value,
                totalAutomobilesDischarge: parseInt(document.getElementById("totalAutomobilesDischarge")?.value) || 0,
                heavyEquipmentDischarge: parseInt(document.getElementById("heavyEquipmentDischarge")?.value) || 0,
                brvTarget: parseInt(document.getElementById("brvTarget")?.value) || 0,
                zeeTarget: parseInt(document.getElementById("zeeTarget")?.value) || 0,
                souTarget: parseInt(document.getElementById("souTarget")?.value) || 0,
                expectedRate: parseFloat(document.getElementById("expectedRate").value) || 0,
                totalDrivers: parseInt(document.getElementById("totalDrivers").value) || 0,
                shiftStart: document.getElementById("shiftStart").value,
                shiftEnd: document.getElementById("shiftEnd").value,
                breakDuration: parseInt(document.getElementById("breakDuration").value) || 0,
                targetCompletion: document.getElementById("targetCompletion").value,
                ticoVans: numVans,
                ticoStationWagons: numStationWagons,
                vanIds: vanIds,
                wagonIds: wagonIds
            };
        }

        function generateDashboard() {
            operationData = collectFormData();
            
            // Save ship operation to backend
            saveShipOperation(operationData);
            
            // Hide wizard, show dashboard
            document.getElementById("wizardInterface").classList.add("hidden");
            document.getElementById("dashboardInterface").classList.remove("hidden");
            
            // Populate dashboard
            setupDashboard();
            initializeCharts();
            updateDashboard();
        }

        async function saveShipOperation(data) {
            try {
                const response = await fetch('/api/ships', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                if (response.ok) {
                    const shipData = await response.json();
                    operationData.shipId = shipData.id;
                    console.log('Ship operation saved successfully:', shipData);
                } else {
                    console.error('Failed to save ship operation');
                }
            } catch (error) {
                console.error('Error saving ship operation:', error);
            }
        }

        function setupDashboard() {
            // Setup header with navigation
            const headerHtml = `
                <div class="flex justify-between items-start mb-4">
                    <div>
                        <h1 class="text-4xl font-bold text-white mb-4">
                            <i class="fas fa-ship mr-3"></i>${operationData.vesselName} Operations Dashboard
                        </h1>
                        <div class="text-xl text-blue-100">
                            ${operationData.company} | ${operationData.port} | ${operationData.operationDate}
                        </div>
                        <div class="bg-white/20 backdrop-blur-sm rounded-lg p-4 mt-4 inline-block">
                            <strong>Operation Type:</strong> ${operationData.operationType} | 
                            <strong>Cargo:</strong> ${operationData.cargoType || "Mixed"}
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="goToMasterDashboard()" class="bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-lg font-semibold transition duration-200 flex items-center">
                            <i class="fas fa-arrow-left mr-2"></i>Master Dashboard
                        </button>
                        <button onclick="showWizard()" class="bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-lg font-semibold transition duration-200 flex items-center">
                            <i class="fas fa-edit mr-2"></i>Edit Operation
                        </button>
                    </div>
                </div>
            `;
            document.getElementById("dashboardHeader").innerHTML = headerHtml;

            // Setup control inputs
            document.getElementById("currentDischarged").value = 0;
            document.getElementById("currentDischarged").max = operationData.totalAutomobilesDischarge;
            document.getElementById("currentRate").value = operationData.expectedRate;
            document.getElementById("currentBrvLoaded").value = 0;
            document.getElementById("currentBrvLoaded").max = operationData.brvTarget;
            document.getElementById("currentDrivers").value = operationData.totalDrivers;

            // Setup data table
            updateDataTable();
        }

        function updateDashboard() {
            const discharged = parseInt(document.getElementById("currentDischarged").value) || 0;
            const rate = parseFloat(document.getElementById("currentRate").value) || 0;
            const brvLoaded = parseInt(document.getElementById("currentBrvLoaded").value) || 0;
            const drivers = parseInt(document.getElementById("currentDrivers").value) || 0;

            // Update KPIs
            const dischargePercent = (discharged / operationData.totalAutomobilesDischarge * 100).toFixed(1);
            const brvPercent = operationData.brvTarget > 0 ? (brvLoaded / operationData.brvTarget * 100).toFixed(1) : 0;
            const remaining = operationData.totalAutomobilesDischarge - discharged;
            const etc = remaining > 0 && rate > 0 ? Math.ceil(remaining / rate * 60) : 0;

            document.getElementById("dischargeProgress").textContent = dischargePercent + "%";
            document.getElementById("dischargeProgressBar").style.width = dischargePercent + "%";
            document.getElementById("currentRateDisplay").textContent = rate.toFixed(1);
            document.getElementById("brvProgress").textContent = brvPercent + "%";
            document.getElementById("brvProgressBar").style.width = brvPercent + "%";
            
            // Update ETC
            if (etc > 0) {
                const hours = Math.floor(etc / 60);
                const minutes = etc % 60;
                document.getElementById("etcDisplay").textContent = `${hours}:${minutes.toString().padStart(2, "0")}`;
            } else {
                document.getElementById("etcDisplay").textContent = "Complete";
            }

            // Update charts
            updateCharts();
            updateDataTable();
        }

        function initializeCharts() {
            // Progress Chart
            const progressCtx = document.getElementById("progressChart").getContext("2d");
            progressChart = new Chart(progressCtx, {
                type: "line",
                data: {
                    labels: ["Start", "Current", "Projected"],
                    datasets: [{
                        label: "Discharge Progress",
                        data: [0, 0, 100],
                        borderColor: "rgb(59, 130, 246)",
                        backgroundColor: "rgba(59, 130, 246, 0.1)",
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + "%";
                                }
                            }
                        }
                    }
                }
            });

            // Overview Chart
            const overviewCtx = document.getElementById("overviewChart").getContext("2d");
            overviewChart = new Chart(overviewCtx, {
                type: "doughnut",
                data: {
                    labels: ["Discharged", "Remaining"],
                    datasets: [{
                        data: [0, operationData.totalAutomobilesDischarge],
                        backgroundColor: ["#10B981", "#E5E7EB"],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: "bottom"
                        }
                    }
                }
            });
        }

        function updateCharts() {
            const discharged = parseInt(document.getElementById("currentDischarged").value) || 0;
            const remaining = operationData.totalAutomobilesDischarge - discharged;
            const percentage = (discharged / operationData.totalAutomobilesDischarge * 100);

            // Update progress chart
            progressChart.data.datasets[0].data = [0, percentage, 100];
            progressChart.update();

            // Update overview chart
            overviewChart.data.datasets[0].data = [discharged, remaining];
            overviewChart.update();
        }

        function updateDataTable() {
            const discharged = parseInt(document.getElementById("currentDischarged").value) || 0;
            const brvLoaded = parseInt(document.getElementById("currentBrvLoaded").value) || 0;
            const rate = parseFloat(document.getElementById("currentRate").value) || 0;

            const tableData = [
                {
                    metric: "Automobiles Discharge",
                    target: operationData.totalAutomobilesDischarge,
                    current: discharged,
                    remaining: operationData.totalAutomobilesDischarge - discharged,
                    status: discharged >= operationData.totalAutomobilesDischarge ? "Complete" : "In Progress"
                },
                {
                    metric: "BRV Loading",
                    target: operationData.brvTarget || 0,
                    current: brvLoaded,
                    remaining: (operationData.brvTarget || 0) - brvLoaded,
                    status: brvLoaded >= (operationData.brvTarget || 0) ? "Complete" : "In Progress"
                },
                {
                    metric: "Current Rate",
                    target: operationData.expectedRate + " cars/hr",
                    current: rate.toFixed(1) + " cars/hr",
                    remaining: "--",
                    status: rate >= operationData.expectedRate ? "Above Target" : "Below Target"
                }
            ];

            const tableHtml = tableData.map(row => `
                <tr class="border-b border-gray-200">
                    <td class="px-4 py-3 font-medium">${row.metric}</td>
                    <td class="px-4 py-3">${row.target}</td>
                    <td class="px-4 py-3">${row.current}</td>
                    <td class="px-4 py-3">${row.remaining}</td>
                    <td class="px-4 py-3">
                        <span class="px-2 py-1 text-xs rounded-full ${getStatusClass(row.status)}">
                            ${row.status}
                        </span>
                    </td>
                </tr>
            `).join("");

            document.getElementById("dataTableBody").innerHTML = tableHtml;
        }

        function getStatusClass(status) {
            switch (status) {
                case "Complete":
                    return "bg-green-100 text-green-800";
                case "Above Target":
                    return "bg-blue-100 text-blue-800";
                case "In Progress":
                    return "bg-yellow-100 text-yellow-800";
                case "Below Target":
                    return "bg-red-100 text-red-800";
                default:
                    return "bg-gray-100 text-gray-800";
            }
        }

        function showWizard() {
            document.getElementById("dashboardInterface").classList.add("hidden");
            document.getElementById("wizardInterface").classList.remove("hidden");
            
            // Reset wizard
            currentStep = 1;
            document.querySelectorAll("[id^=\"step\"]").forEach(el => {
                if (el.id === "step1") {
                    el.classList.remove("hidden");
                } else {
                    el.classList.add("hidden");
                }
            });
            
            // Reset indicators
            document.querySelectorAll("[id$='-indicator']").forEach(el => {
                el.classList.remove("step-active", "step-completed");
            });
            document.getElementById("step1-indicator").classList.add("step-active");
        }

        // File Upload Functions
        async function handleFileUpload(event) {
            console.log('handleFileUpload called');
            const file = event.target.files[0];
            if (!file) return;

            // Show upload status
            const uploadStatus = document.getElementById('uploadStatus');
            const uploadSuccess = document.getElementById('uploadSuccess');
            const uploadError = document.getElementById('uploadError');
            
            // Hide all status messages first
            uploadStatus.classList.add('hidden');
            uploadSuccess.classList.add('hidden');
            uploadError.classList.add('hidden');
            
            // Show processing status
            uploadStatus.classList.remove('hidden');

            try {
                console.log('Uploading file:', file.name);
                
                // Upload file
                const formData = new FormData();
                formData.append('file', file);
                
                const uploadResponse = await fetch('/api/upload', {
                    method: 'POST',
                    body: formData
                });
                
                const uploadResult = await uploadResponse.json();
                console.log('Upload result:', uploadResult);
                
                if (uploadResult.success) {
                    // Extract data from uploaded file
                    console.log('Extracting data from file...');
                    const extractResponse = await fetch('/api/extract', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            file_path: uploadResult.file_path
                        })
                    });
                    
                    const extractResult = await extractResponse.json();
                    console.log('Extract result:', extractResult);
                    
                    if (extractResult.success) {
                        // Auto-fill form with extracted data
                        console.log('Auto-filling form with extracted data');
                        autoFillForm(extractResult.parsed_data);
                        
                        // Show success message
                        uploadStatus.classList.add('hidden');
                        uploadSuccess.classList.remove('hidden');
                    } else {
                        throw new Error(extractResult.error || 'Failed to extract data from document');
                    }
                } else {
                    throw new Error(uploadResult.error || 'Failed to upload file');
                }
            } catch (error) {
                console.error('Upload error:', error);
                
                // Show error message
                uploadStatus.classList.add('hidden');
                uploadError.classList.remove('hidden');
                const errorText = document.getElementById('errorText');
                if (errorText) {
                    errorText.textContent = error.message || 'Error processing document. Please try again.';
                }
            }
        }

        function autoFillForm(data) {
            console.log('autoFillForm called with data:', data);
            
            // Fill vessel information
            if (data.vesselName) {
                const vesselNameField = document.getElementById('vesselName');
                if (vesselNameField) {
                    vesselNameField.value = data.vesselName;
                    console.log('Filled vessel name:', data.vesselName);
                }
            }
            
            if (data.vesselType) {
                const vesselTypeField = document.getElementById('vesselType');
                if (vesselTypeField) {
                    vesselTypeField.value = data.vesselType;
                    console.log('Filled vessel type:', data.vesselType);
                }
            }
            
            if (data.port) {
                const portField = document.getElementById('port');
                if (portField) {
                    portField.value = data.port;
                    console.log('Filled port:', data.port);
                }
            }
            
            if (data.operationDate) {
                const operationDateField = document.getElementById('operationDate');
                if (operationDateField) {
                    operationDateField.value = data.operationDate;
                    console.log('Filled operation date:', data.operationDate);
                }
            }
            
            if (data.company) {
                const companyField = document.getElementById('company');
                if (companyField) {
                    companyField.value = data.company;
                    console.log('Filled company:', data.company);
                }
            }
            
            if (data.operationType) {
                const operationTypeField = document.getElementById('operationType');
                if (operationTypeField) {
                    operationTypeField.value = data.operationType;
                    console.log('Filled operation type:', data.operationType);
                }
            }

            // Fill team assignment data
            if (data.autoOperationsLead) {
                const autoOpsLeadField = document.getElementById('autoOpsLead');
                if (autoOpsLeadField) {
                    autoOpsLeadField.value = data.autoOperationsLead;
                    console.log('Filled auto ops lead:', data.autoOperationsLead);
                }
            }
            
            if (data.autoOperationsAssistant) {
                const autoOpsAssistantField = document.getElementById('autoOpsAssistant');
                if (autoOpsAssistantField) {
                    autoOpsAssistantField.value = data.autoOperationsAssistant;
                    console.log('Filled auto ops assistant:', data.autoOperationsAssistant);
                }
            }
            
            if (data.heavyHeavyLead) {
                const heavyOpsLeadField = document.getElementById('heavyOpsLead');
                if (heavyOpsLeadField) {
                    heavyOpsLeadField.value = data.heavyHeavyLead;
                    console.log('Filled heavy ops lead:', data.heavyHeavyLead);
                }
            }
            
            if (data.heavyHeavyAssistant) {
                const heavyOpsAssistantField = document.getElementById('heavyOpsAssistant');
                if (heavyOpsAssistantField) {
                    heavyOpsAssistantField.value = data.heavyHeavyAssistant;
                    console.log('Filled heavy ops assistant:', data.heavyHeavyAssistant);
                }
            }
            
            if (data.operationManager) {
                const operationManagerField = document.getElementById('operationManager');
                if (operationManagerField) {
                    operationManagerField.value = data.operationManager;
                    console.log('Filled operation manager:', data.operationManager);
                }
            }
            
            if (data.berthLocation) {
                const berthLocationField = document.getElementById('berthLocation');
                if (berthLocationField) {
                    berthLocationField.value = data.berthLocation;
                    console.log('Filled berth location:', data.berthLocation);
                }
            }

            // Fill operational parameters and store in session storage for later steps
            if (data.expectedRate) {
                sessionStorage.setItem('expectedRate', data.expectedRate);
            }
            if (data.totalDrivers) {
                sessionStorage.setItem('totalDrivers', data.totalDrivers);
            }
            if (data.shiftStart) {
                sessionStorage.setItem('shiftStart', data.shiftStart);
            }
            if (data.shiftEnd) {
                sessionStorage.setItem('shiftEnd', data.shiftEnd);
            }
            if (data.breakDuration) {
                sessionStorage.setItem('breakDuration', data.breakDuration);
            }

            // Fill TICO Transportation counts
            if (data.numVans) {
                sessionStorage.setItem('numVans', data.numVans);
            }
            if (data.numStationWagons) {
                sessionStorage.setItem('numStationWagons', data.numStationWagons);
            }

            // Fill all vehicle IDs (up to 15 vans and 15 wagons)
            for (let i = 1; i <= 15; i++) {
                if (data[`vanId${i}`]) {
                    sessionStorage.setItem(`vanId${i}`, data[`vanId${i}`]);
                }
                if (data[`wagonId${i}`]) {
                    sessionStorage.setItem(`wagonId${i}`, data[`wagonId${i}`]);
                }
            }

            // Fill zone allocations and descriptions
            if (data.zoneA) {
                sessionStorage.setItem('zoneAVehicles', data.zoneA);
            }
            if (data.zoneB) {
                sessionStorage.setItem('zoneBVehicles', data.zoneB);
            }
            if (data.zoneC) {
                sessionStorage.setItem('zoneCVehicles', data.zoneC);
            }
            if (data.zoneADescription) {
                sessionStorage.setItem('zoneADescription', data.zoneADescription);
            }
            if (data.zoneBDescription) {
                sessionStorage.setItem('zoneBDescription', data.zoneBDescription);
            }
            if (data.zoneCDescription) {
                sessionStorage.setItem('zoneCDescription', data.zoneCDescription);
            }

            // Fill loading targets
            if (data.brvTarget) {
                sessionStorage.setItem('brvTarget', data.brvTarget);
            }
            if (data.zeeTarget) {
                sessionStorage.setItem('zeeTarget', data.zeeTarget);
            }
            if (data.souTarget) {
                sessionStorage.setItem('souTarget', data.souTarget);
            }

            // Fill additional cargo fields
            if (data.electricVehicles) {
                sessionStorage.setItem('electricVehicles', data.electricVehicles);
            }
            if (data.staticCargo) {
                sessionStorage.setItem('staticCargo', data.staticCargo);
            }
            if (data.cargoType) {
                sessionStorage.setItem('cargoType', data.cargoType);
            }

            // Fill vehicle brand counts
            if (data.audi) {
                sessionStorage.setItem('audi', data.audi);
            }
            if (data.porsche) {
                sessionStorage.setItem('porsche', data.porsche);
            }
            if (data.mini) {
                sessionStorage.setItem('mini', data.mini);
            }
            if (data.jaguar) {
                sessionStorage.setItem('jaguar', data.jaguar);
            }

            // Store existing data for later steps
            if (data.totalAutomobilesDischarge) {
                sessionStorage.setItem('totalAutomobilesDischarge', data.totalAutomobilesDischarge);
            }
            if (data.heavyEquipmentDischarge) {
                sessionStorage.setItem('heavyEquipmentDischarge', data.heavyEquipmentDischarge);
            }
            if (data.mbCount) {
                sessionStorage.setItem('mbCount', data.mbCount);
            }
            if (data.bmwCount) {
                sessionStorage.setItem('bmwCount', data.bmwCount);
            }
            if (data.lrCount) {
                sessionStorage.setItem('lrCount', data.lrCount);
            }
            if (data.rrCount) {
                sessionStorage.setItem('rrCount', data.rrCount);
            }

            console.log('Form auto-fill completed');
        }

        // Function to populate fields from sessionStorage when navigating between steps
        function populateFromSessionStorage() {
            // Populate operational parameters
            const expectedRate = sessionStorage.getItem('expectedRate');
            if (expectedRate && document.getElementById('expectedRate')) {
                document.getElementById('expectedRate').value = expectedRate;
            }
            
            const totalDrivers = sessionStorage.getItem('totalDrivers');
            if (totalDrivers && document.getElementById('totalDrivers')) {
                document.getElementById('totalDrivers').value = totalDrivers;
            }
            
            const shiftStart = sessionStorage.getItem('shiftStart');
            if (shiftStart && document.getElementById('shiftStart')) {
                document.getElementById('shiftStart').value = shiftStart;
            }
            
            const shiftEnd = sessionStorage.getItem('shiftEnd');
            if (shiftEnd && document.getElementById('shiftEnd')) {
                document.getElementById('shiftEnd').value = shiftEnd;
            }
            
            const breakDuration = sessionStorage.getItem('breakDuration');
            if (breakDuration && document.getElementById('breakDuration')) {
                document.getElementById('breakDuration').value = breakDuration;
            }
            
            // Populate TICO Transportation counts
            const numVans = sessionStorage.getItem('numVans');
            if (numVans && document.getElementById('numVans')) {
                document.getElementById('numVans').value = numVans;
                generateVehicleIdFields(); // Generate fields first
                
                // Then populate vehicle IDs
                setTimeout(() => {
                    for (let i = 1; i <= 15; i++) {
                        const vanId = sessionStorage.getItem(`vanId${i}`);
                        if (vanId && document.getElementById(`vanId${i}`)) {
                            document.getElementById(`vanId${i}`).value = vanId;
                        }
                    }
                }, 100);
            }
            
            const numStationWagons = sessionStorage.getItem('numStationWagons');
            if (numStationWagons && document.getElementById('numStationWagons')) {
                document.getElementById('numStationWagons').value = numStationWagons;
                generateVehicleIdFields(); // Generate fields first
                
                // Then populate wagon IDs
                setTimeout(() => {
                    for (let i = 1; i <= 15; i++) {
                        const wagonId = sessionStorage.getItem(`wagonId${i}`);
                        if (wagonId && document.getElementById(`wagonId${i}`)) {
                            document.getElementById(`wagonId${i}`).value = wagonId;
                        }
                    }
                }, 100);
            }
            
            // Populate zone allocations and descriptions
            const zoneAVehicles = sessionStorage.getItem('zoneAVehicles');
            if (zoneAVehicles && document.getElementById('zoneAVehicles')) {
                document.getElementById('zoneAVehicles').value = zoneAVehicles;
            }
            
            const zoneBVehicles = sessionStorage.getItem('zoneBVehicles');
            if (zoneBVehicles && document.getElementById('zoneBVehicles')) {
                document.getElementById('zoneBVehicles').value = zoneBVehicles;
            }
            
            const zoneCVehicles = sessionStorage.getItem('zoneCVehicles');
            if (zoneCVehicles && document.getElementById('zoneCVehicles')) {
                document.getElementById('zoneCVehicles').value = zoneCVehicles;
            }
            
            const zoneADescription = sessionStorage.getItem('zoneADescription');
            if (zoneADescription && document.getElementById('zoneADescription')) {
                document.getElementById('zoneADescription').value = zoneADescription;
            }
            
            const zoneBDescription = sessionStorage.getItem('zoneBDescription');
            if (zoneBDescription && document.getElementById('zoneBDescription')) {
                document.getElementById('zoneBDescription').value = zoneBDescription;
            }
            
            const zoneCDescription = sessionStorage.getItem('zoneCDescription');
            if (zoneCDescription && document.getElementById('zoneCDescription')) {
                document.getElementById('zoneCDescription').value = zoneCDescription;
            }
            
            // Populate loading targets
            const brvTarget = sessionStorage.getItem('brvTarget');
            if (brvTarget && document.getElementById('brvTarget')) {
                document.getElementById('brvTarget').value = brvTarget;
            }
            
            const zeeTarget = sessionStorage.getItem('zeeTarget');
            if (zeeTarget && document.getElementById('zeeTarget')) {
                document.getElementById('zeeTarget').value = zeeTarget;
            }
            
            const souTarget = sessionStorage.getItem('souTarget');
            if (souTarget && document.getElementById('souTarget')) {
                document.getElementById('souTarget').value = souTarget;
            }
            
            // Populate additional cargo fields
            const electricVehicles = sessionStorage.getItem('electricVehicles');
            if (electricVehicles && document.getElementById('electricVehicles')) {
                document.getElementById('electricVehicles').value = electricVehicles;
            }
            
            const staticCargo = sessionStorage.getItem('staticCargo');
            if (staticCargo && document.getElementById('staticCargo')) {
                document.getElementById('staticCargo').value = staticCargo;
            }
            
            const cargoType = sessionStorage.getItem('cargoType');
            if (cargoType && document.getElementById('cargoType')) {
                document.getElementById('cargoType').value = cargoType;
            }
            
            // Populate vehicle brand counts
            const audi = sessionStorage.getItem('audi');
            if (audi && document.getElementById('audi')) {
                document.getElementById('audi').value = audi;
            }
            
            const porsche = sessionStorage.getItem('porsche');
            if (porsche && document.getElementById('porsche')) {
                document.getElementById('porsche').value = porsche;
            }
            
            const mini = sessionStorage.getItem('mini');
            if (mini && document.getElementById('mini')) {
                document.getElementById('mini').value = mini;
            }
            
            const jaguar = sessionStorage.getItem('jaguar');
            if (jaguar && document.getElementById('jaguar')) {
                document.getElementById('jaguar').value = jaguar;
            }
        }

        function highlightFilledFields() {

        function showUploadStatus(message) {
            hideAllUploadMessages();
            document.getElementById('uploadStatus').classList.remove('hidden');
            document.getElementById('uploadText').textContent = message;
        }

        function showUploadSuccess() {
            hideAllUploadMessages();
            document.getElementById('uploadSuccess').classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('uploadSuccess').classList.add('hidden');
            }, 5000);
        }

        function showUploadError(message) {
            hideAllUploadMessages();
            document.getElementById('uploadError').classList.remove('hidden');
            document.getElementById('errorText').textContent = message;
            setTimeout(() => {
                document.getElementById('uploadError').classList.add('hidden');
            }, 5000);
        }

        function hideAllUploadMessages() {
            document.getElementById('uploadStatus').classList.add('hidden');
            document.getElementById('uploadSuccess').classList.add('hidden');
            document.getElementById('uploadError').classList.add('hidden');
        }

        // Enhanced populateCargoConfiguration to use stored data
        function populateCargoConfigurationEnhanced(operationType) {
            populateCargoConfiguration(operationType);
            
            // Auto-fill cargo data from session storage
            setTimeout(() => {
                const totalAutomobiles = sessionStorage.getItem('totalAutomobilesDischarge');
                const heavyEquipment = sessionStorage.getItem('heavyEquipmentDischarge');
                const brvTarget = sessionStorage.getItem('brvTarget');
                const zeeTarget = sessionStorage.getItem('zeeTarget');
                const souTarget = sessionStorage.getItem('souTarget');
                const electricVehicles = sessionStorage.getItem('electricVehicles');
                const staticCargo = sessionStorage.getItem('staticCargo');
                const cargoType = sessionStorage.getItem('cargoType');

                if (totalAutomobiles && document.getElementById('totalAutomobilesDischarge')) {
                    document.getElementById('totalAutomobilesDischarge').value = totalAutomobiles;
                }
                if (heavyEquipment && document.getElementById('heavyEquipmentDischarge')) {
                    document.getElementById('heavyEquipmentDischarge').value = heavyEquipment;
                }
                if (brvTarget && document.getElementById('brvTarget')) {
                    document.getElementById('brvTarget').value = brvTarget;
                }
                if (zeeTarget && document.getElementById('zeeTarget')) {
                    document.getElementById('zeeTarget').value = zeeTarget;
                }
                if (souTarget && document.getElementById('souTarget')) {
                    document.getElementById('souTarget').value = souTarget;
                }
                if (electricVehicles && document.getElementById('electricVehicles')) {
                    document.getElementById('electricVehicles').value = electricVehicles;
                }
                if (staticCargo && document.getElementById('staticCargo')) {
                    document.getElementById('staticCargo').value = staticCargo;
                }
                if (cargoType && document.getElementById('cargoType')) {
                    document.getElementById('cargoType').value = cargoType;
                }
                
                // Fill zone data
                const zoneAVehicles = sessionStorage.getItem('zoneAVehicles');
                const zoneBVehicles = sessionStorage.getItem('zoneBVehicles');
                const zoneCVehicles = sessionStorage.getItem('zoneCVehicles');
                const zoneADescription = sessionStorage.getItem('zoneADescription');
                const zoneBDescription = sessionStorage.getItem('zoneBDescription');
                const zoneCDescription = sessionStorage.getItem('zoneCDescription');
                
                if (zoneAVehicles && document.getElementById('zoneAVehicles')) {
                    document.getElementById('zoneAVehicles').value = zoneAVehicles;
                }
                if (zoneBVehicles && document.getElementById('zoneBVehicles')) {
                    document.getElementById('zoneBVehicles').value = zoneBVehicles;
                }
                if (zoneCVehicles && document.getElementById('zoneCVehicles')) {
                    document.getElementById('zoneCVehicles').value = zoneCVehicles;
                }
                if (zoneADescription && document.getElementById('zoneADescription')) {
                    document.getElementById('zoneADescription').value = zoneADescription;
                }
                if (zoneBDescription && document.getElementById('zoneBDescription')) {
                    document.getElementById('zoneBDescription').value = zoneBDescription;
                }
                if (zoneCDescription && document.getElementById('zoneCDescription')) {
                    document.getElementById('zoneCDescription').value = zoneCDescription;
                }
            }, 100);
        }

        function goToMasterDashboard() {
            window.location.href = '/master';
        }

        // Set default date
        document.getElementById("operationDate").value = new Date().toISOString().split("T")[0];
        document.getElementById("shiftStart").value = "07:00";
        document.getElementById("shiftEnd").value = "19:00";
    </script>
</body>
</html>

